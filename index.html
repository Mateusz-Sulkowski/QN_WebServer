<html lang="pl-PL">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&display=swap" rel="stylesheet">
        <script src='pureknob.js'></script>
    </head>
    <body>
        <h1>QN WebServer</h1>
        <div id="pudlo">
            <div id="knobsection">
                <div id='knob1'></div>
                <form>
                    <input id='knobInput' type='text' step='0.5' min='76' max='108';>
                    <input type="button" id='enter' value="Enter">
                </form>
                <div id='knob2'></div>
                <div id='knob3'></div>
            </div>
            <div id="togglebuttons">
                <div id="allswitch">
                    <div id="1switch">
                        <div class='switche'>
                            <label class="switch">
                                <input type="checkbox">
                                <span class="slider round"></span>
                            </label><br />
                        </div>
                        <div class="tekst">
                            <span class="duzytekst"> radio</span>
                        </div>
                    </div><div style="clear: both;"></div>
                    <div id="2switch">
                        <div class='switche'>
                            <label class="switch">
                                <input type="checkbox">
                                <span class="slider round"></span>
                            </label><br />
                        </div>
                        <div class="tekst">
                            <span class="duzytekst"> relay</span> 
                        </div>
                    </div><div style="clear: both;"></div>
                    <div id="3switch">
                        <div class='switche'>
                            <label class="switch">
                                <input type="checkbox">
                                <span class="slider round"></span>
                            </label><br />
                        </div>
                        <div class="tekst">
                            <span class="duzytekst"> cos</span>
                        </div>
                    </div><div style="clear: both;"></div>
                </div>
            </div>
            <div style="clear:both"></div>
            <div id="statsection">
                <span class="duzytekst">
                    uptime:<br />
                    voltage:<br />
                    charging:<br />
                 </span>
            </div>
            <div id="radiocalsection">
                <form id="radiocalibration">
                    <button onclick='changeLed(1,1)'>LED 1 ON</button>
                    <button onclick='changeLed(1,0)'>LED 1 OFF</button>
                    <input type='range' min='0' max='255' value='0' id='brightness1' onchange='changeBrightness(1, this.value)'><br />
                    <button onclick='changeLed(1,1)'>LED 2 ON</button>
                    <button onclick='changeLed(1,0)'>LED 2 OFF</button>
                    <input type='range' min='0' max='255' value='0' id='brightness1' onchange='changeBrightness(1, this.value)'><br />
                    <button onclick='changeLed(1,1)'>LED 3 ON</button>
                    <button onclick='changeLed(1,0)'>LED 3 OFF</button>
                    <input type='range' min='0' max='255' value='0' id='brightness1' onchange='changeBrightness(1, this.value)'><br />
                    <button onclick='changeLed(1,1)'>LED 4 ON</button>
                    <button onclick='changeLed(1,0)'>LED 4 OFF</button>
                    <input type='range' min='0' max='255' value='0' id='brightness1' onchange='changeBrightness(1, this.value)'><br />
                    <button onclick='changeLed(1,1)'>LED 5 ON</button>
                    <button onclick='changeLed(1,0)'>LED 5 OFF</button>
                    <input type='range' min='0' max='255' value='0' id='brightness1' onchange='changeBrightness(1, this.value)'><br />
                    <button onclick='changeLed(1,1)'>LED 6 ON</button>
                    <button onclick='changeLed(1,0)'>LED 6 OFF</button>
                    <input type='range' min='0' max='255' value='0' id='brightness1' onchange='changeBrightness(1, this.value)'><br />
                    <button onclick='changeLed(1,1)'>LED 7 ON</button>
                    <button onclick='changeLed(1,0)'>LED 7 OFF</button>
                    <input type='range' min='0' max='255' value='0' id='brightness1' onchange='changeBrightness(1, this.value)'><br />
                </form>
            </div>    
        </div>
        <script> var knobInput = document.getElementById('knobInput'); var enterButton = document.getElementById('enter'); enterButton.addEventListener('click', function() { knob.setValue(knobInput.value); });</script>
        <script>
            function changeLed(led,state) { 
                var xhttp = new XMLHttpRequest();
                xhttp.open('GET', 'led?led=' + led + '&state=' + state, true);
                xhttp.send(); 
                if (state === 1) { 
                    document.getElementById('brightness' + led).value = 255;
                } else if (state === 0) { 
                    document.getElementById('brightness' + led).value = 0;} 
            } 
            function changeBrightness(led,brightness) { 
                document.getElementById('brightness' + led).value = brightness; 
                var xhttp = new XMLHttpRequest(); 
                xhttp.open('GET', 'brightness?led=' + led + '&brightness=' + brightness, true); 
                xhttp.send(); 
            }
        </script>
        <script>
            //knob 1
            var knob1 = pureknob.createKnob(300, 300); 
            knob1.setProperty('angleStart', -1. * Math.PI); 
            knob1.setProperty('angleEnd', 1 * Math.PI); 
            knob1.setProperty('colorFG', '#ff4d4d'); 
            knob1.setProperty('trackWidth', 0.4); 
            knob1.setProperty('valMin', 76); 
            knob1.setProperty('valMax', 108); 
            knob1.setProperty('val', 89.5); 
            knob1.setProperty('val', 89.5); 
            knob1.setProperty('needle', true);
            var listener = function(knob1, value) { 
                var xhttp = new XMLHttpRequest(); 
                xhttp.open('GET', 'brightness?led=' + 7 + '&brightness=' + (value - 76) * (255 / (108 - 76)), true); 
                xhttp.send(); 
                console.log((value - 76) * (255 / (108 - 76)));
            }; 
            knob1.addListener(listener); 
            var node = knob1.node(); 
            var elem = document.getElementById('knob1'); 
            elem.appendChild(node);

            //knob 2
            var knob2 = pureknob.createKnob(300, 300); 
            knob2.setProperty('angleStart', -1. * Math.PI); 
            knob2.setProperty('angleEnd', 1 * Math.PI); 
            knob2.setProperty('colorFG', '#ff4d4d'); 
            knob2.setProperty('trackWidth', 0.4); 
            knob2.setProperty('valMin', 76); 
            knob2.setProperty('valMax', 108); 
            knob2.setProperty('val', 89.5); 
            knob2.setProperty('val', 89.5); 
            knob2.setProperty('needle', true);
            var listener = function(knob2, value) { 
                var xhttp = new XMLHttpRequest(); 
                xhttp.open('GET', 'brightness?led=' + 7 + '&brightness=' + (value - 76) * (255 / (108 - 76)), true); 
                xhttp.send(); 
                console.log((value - 76) * (255 / (108 - 76)));
            }; 
            knob2.addListener(listener); 
            var node = knob2.node(); 
            var elem = document.getElementById('knob2'); 
            elem.appendChild(node);

            //knob 3
            var knob3 = pureknob.createKnob(300, 300); 
            knob3.setProperty('angleStart', -1. * Math.PI); 
            knob3.setProperty('angleEnd', 1 * Math.PI); 
            knob3.setProperty('colorFG', '#ff4d4d'); 
            knob3.setProperty('trackWidth', 0.4); 
            knob3.setProperty('valMin', 76); 
            knob3.setProperty('valMax', 108); 
            knob3.setProperty('val', 89.5); 
            knob3.setProperty('val', 89.5); 
            knob3.setProperty('needle', true);
            var listener = function(knob3, value) { 
                var xhttp = new XMLHttpRequest(); 
                xhttp.open('GET', 'brightness?led=' + 7 + '&brightness=' + (value - 76) * (255 / (108 - 76)), true); 
                xhttp.send(); 
                console.log((value - 76) * (255 / (108 - 76)));
            }; 
            knob3.addListener(listener); 
            var node = knob3.node(); 
            var elem = document.getElementById('knob3'); 
            elem.appendChild(node);
        </script>
        </body>
</html>